"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Scroller=function(){function n(e){_classCallCheck(this,n);document.querySelector(e);this.sections=document.querySelectorAll("section");var t=_toConsumableArray(this.sections).findIndex(this.isScrolledIntoView);this.currentSectionIndex=t<0?0:t,this.isThrottled=!1,this.drawNavigation()}return _createClass(n,[{key:"isScrolledIntoView",value:function(e){var t=e.getBoundingClientRect(),n=t.top,i=Math.floor(t.bottom);return 0<=n&&i<=window.innerHeight}},{key:"listenScroll",value:function(e){var t=this;if(!this.isThrottled){this.isThrottled=!0,setTimeout(function(){t.isThrottled=!1},1e3);var n=0<e.deltaY?1:-1;this.scroll(n)}}},{key:"scroll",value:function(e){if(1===e){if(this.currentSectionIndex===this.sections.length-1)return}else if(-1===e){if(0===this.currentSectionIndex)return}this.currentSectionIndex=this.currentSectionIndex+e,this.scrollToCurrentSection()}},{key:"scrollToCurrentSection",value:function(){this.selectActiveNavItem(),this.sections[this.currentSectionIndex].scrollIntoView({behavior:"smooth",block:"start"})}},{key:"drawNavigation",value:function(){var i=this;this.navigationContainer=document.createElement("aside"),this.navigationContainer.setAttribute("class","scroller__navigation");var r=document.createElement("ul");this.sections.forEach(function(e,t){var n=document.createElement("li");n.addEventListener("click",function(){i.currentSectionIndex=t,i.scrollToCurrentSection()}),r.appendChild(n)}),this.navigationContainer.appendChild(r),document.body.appendChild(this.navigationContainer),this.selectActiveNavItem()}},{key:"selectActiveNavItem",value:function(){var n=this;this.navigationContainer&&this.navigationContainer.querySelectorAll("li").forEach(function(e,t){t===n.currentSectionIndex?e.classList.add("active"):e.classList.remove("active")})}}]),n}();